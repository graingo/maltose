<div align="center">
  <a href="https://graingo.github.io/maltose-docs/">
    <img width="128" src="https://graingo.github.io/maltose-docs/logo.svg" alt="Maltose Logo">
  </a>
  <h1>Maltose</h1>
  <p><strong>åŸºäº Gin æ‰“é€ çš„è½»é‡çº§ã€ä¼ä¸šçº§ Go Web å¼€å‘æ¡†æ¶</strong></p>
  <p>
    <a href="https://graingo.github.io/maltose-docs/"><strong>æŸ¥çœ‹æ–‡æ¡£</strong></a> Â·
    <a href="https://github.com/Graingo/maltose/issues/new/choose">æäº¤ Bug</a> Â·
    <a href="https://github.com/Graingo/maltose/issues/new/choose">åŠŸèƒ½éœ€æ±‚</a>
  </p>
</div>

<div align="center">

[![Go Reference](https://pkg.go.dev/badge/github.com/graingo/maltose.svg)](https://pkg.go.dev/github.com/graingo/maltose)
[![Go Report Card](https://goreportcard.com/badge/github.com/graingo/maltose)](https://goreportcard.com/report/github.com/graingo/maltose)
[![License](https://img.shields.io/github/license/graingo/maltose.svg)](LICENSE)

</div>

Maltose æ˜¯ä¸€æ¬¾åŸºäº [Gin](https://github.com/gin-gonic/gin) è®¾è®¡çš„ã€æ—¨åœ¨æå‡å›¢é˜Ÿå¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡çš„ Go Web æ¡†æ¶ã€‚å®ƒé€šè¿‡çº¦å®šä¼˜äºé…ç½®ã€æ¸…æ™°çš„åˆ†å±‚æ¶æ„å’Œå¼ºå¤§çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºå¯ç»´æŠ¤ã€å¯æ‰©å±•çš„ä¼ä¸šçº§åº”ç”¨ã€‚

## æ ¸å¿ƒç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº Gin æ ¸å¿ƒï¼Œä¿è¯äº†å“è¶Šçš„è·¯ç”±å’Œä¸­é—´ä»¶æ€§èƒ½ã€‚
- ğŸ§± **æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†ï¼Œå¦‚ `mhttp`, `mcfg`, `mlog`, `mdb`ï¼Œæ˜“äºæ‰©å±•å’Œæ›¿æ¢ã€‚
- ğŸ”§ **ä»£ç ç”Ÿæˆ**: å†…ç½®å¼ºå¤§çš„ CLI å·¥å…·ï¼Œå¯ä¸€é”®ç”Ÿæˆ `model`, `dao`, `service` ç­‰ä¸šåŠ¡ä»£ç ã€‚
- ğŸ”­ **å¯è§‚æµ‹æ€§**: åŸç”Ÿé›†æˆ OpenTelemetryï¼Œæä¾›å¼€ç®±å³ç”¨çš„é“¾è·¯è¿½è¸ªå’ŒæŒ‡æ ‡ç›‘æ§èƒ½åŠ›ã€‚
- ğŸ¤ **Gin ç”Ÿæ€å…¼å®¹**: å®Œå…¨å…¼å®¹æµ·é‡çš„ Gin ä¸­é—´ä»¶ï¼Œæ— ç¼è¿ç§»ã€‚
- ğŸ“š **æ–‡æ¡£å®Œå¤‡**: æä¾›å†…å®¹è¯¦å°½ã€ç»“æ„æ¸…æ™°çš„å®˜æ–¹æ–‡æ¡£ã€‚

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
go get -u github.com/graingo/maltose
```

### åˆ›å»ºé¡¹ç›®

æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨é€šè¿‡ [maltose-quickstart](https://github.com/graingo/maltose-quickstart) æ¨¡æ¿æ¥å¼€å§‹æ‚¨çš„æ–°é¡¹ç›®ï¼Œå®ƒå·²ç»ä¸ºæ‚¨é…ç½®å¥½äº†æ¨èçš„é¡¹ç›®ç»“æ„ã€‚

```bash
# å…‹éš†å¿«é€Ÿå¯åŠ¨æ¨¡æ¿
git clone https://github.com/graingo/maltose-quickstart.git my-app

# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-app

# (é‡è¦) ä¿®æ”¹ go.mod ä¸­çš„æ¨¡å—åä¸ºæ‚¨è‡ªå·±çš„é¡¹ç›®è·¯å¾„
go mod edit -module "your/module/path"

# æ•´ç†ä¾èµ–
go mod tidy

# è¿è¡Œ
go run main.go
```

## äº†è§£æ›´å¤š

æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨é˜…è¯» **[å®˜æ–¹æ–‡æ¡£](https://graingo.github.io/maltose-docs/)** ä»¥è·å¾—å…³äºæ¡†æ¶çš„å®Œæ•´ä»‹ç»ã€æ ¸å¿ƒæ¦‚å¿µã€ç»„ä»¶ä½¿ç”¨å’Œé«˜çº§ç‰¹æ€§çš„è¯¦ç»†æŒ‡å—ã€‚

## è®¾è®¡å‚è€ƒ

Maltose åœ¨è®¾è®¡ä¸Šæ·±å—ä¼˜ç§€çš„å¼€æºé¡¹ç›® [GoFrame](https://github.com/gogf/gf) çš„å¯å‘ï¼Œæˆ‘ä»¬å¯¹å…¶åœ¨æ¨¡å—åŒ–ã€æ¥å£åŒ–ã€å·¥ç¨‹åŒ–æ–¹é¢çš„è®¾è®¡å“²å­¦è¡¨ç¤ºæ•¬æ„å’Œæ„Ÿè°¢ã€‚

ä¸ GoFrame è¿½æ±‚å¤§è€Œå…¨çš„å…¨åŠŸèƒ½å¥—ä»¶ä¸åŒï¼ŒMaltose çš„ç›®æ ‡æ˜¯æˆä¸ºä¸€ä¸ªæ›´åŠ  **è½»é‡çº§ã€ä¸“æ³¨** çš„æ¡†æ¶ã€‚æˆ‘ä»¬é€‰æ‹©åŸºäºæ‹¥æœ‰åºå¤§ç”Ÿæ€å’Œé«˜æ€§èƒ½çš„ [Gin](https://github.com/gin-gonic/gin) ä½œä¸º Web æ ¸å¿ƒï¼Œä¸“æ³¨äºåç«¯ API çš„å¼€å‘åœºæ™¯ï¼Œè‡´åŠ›äºä¸ºå¼€å‘è€…æä¾›ä¸€å¥—æ—¢æœ‰ GoFrame å·¥ç¨‹åŒ–ä¼˜ç‚¹ï¼Œåˆèƒ½å……åˆ†äº«å— Gin ç”Ÿæ€çº¢åˆ©çš„å¼€å‘ä½“éªŒã€‚

## è‡´è°¢

Maltose çš„è¯ç”Ÿç¦»ä¸å¼€ä»¥ä¸‹ä¼˜ç§€å¼€æºé¡¹ç›®çš„å¯å‘å’Œæ”¯æŒï¼š

- **[GoFrame](https://github.com/gogf/gf)**: æä¾›äº†å“è¶Šçš„å·¥ç¨‹åŒ–æ€æƒ³å’Œåˆ†å±‚æ¶æ„è®¾è®¡çš„çµæ„Ÿã€‚
- **[Gin](https://github.com/gin-gonic/gin)**: æä¾›äº†ç¨³å®šã€é«˜æ€§èƒ½çš„ Web æ ¸å¿ƒã€‚

åœ¨æ­¤å‘ä»¥ä¸Šé¡¹ç›®åŠå…¶æ‰€æœ‰è´¡çŒ®è€…è¡¨ç¤ºè¯šæŒšçš„æ„Ÿè°¢ï¼

## è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼æ‚¨å¯ä»¥ï¼š

- æäº¤ Bug æˆ–æå‡ºåŠŸèƒ½å»ºè®® [Issues](https://github.com/Graingo/maltose/issues/new/choose).
- é€šè¿‡ [Pull Requests](https://github.com/Graingo/maltose/pulls) æäº¤æ‚¨çš„ä»£ç ã€‚

## è®¸å¯è¯

MIT è®¸å¯è¯

Enjoy it!

### ç»“æ„ä½“è½¬æ¢ (Struct Conversion)

`mconv` åŒ…åœ¨ `complex` å­åŒ…ä¸­æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„ `Struct` å‡½æ•° (ä»¥åŠå®ƒè¿”å›é”™è¯¯çš„ç‰ˆæœ¬ `StructE`)ã€‚è¿™ä¸ªå·¥å…·ä¸“ä¸ºå°† `map[string]interface{}` æˆ–å…¶ä»– `struct` çµæ´»ã€é«˜æ€§èƒ½åœ°è½¬æ¢ä¸ºç›®æ ‡ `struct` è€Œè®¾è®¡ã€‚å®ƒåˆ©ç”¨ç¼“å­˜æœºåˆ¶æ¥ä¼˜åŒ–é‡å¤è½¬æ¢ï¼Œä»è€Œå®ç°æ˜¾è‘—çš„é€Ÿåº¦æå‡ã€‚

**ä¸»è¦ç‰¹æ€§:**

- **ç®€å•è½¬æ¢**: ç›´æ¥å°†æ•°æ®æ˜ å°„åˆ°ç»“æ„ä½“çš„å­—æ®µã€‚
- **æ ‡ç­¾é©±åŠ¨æ˜ å°„**: ä½¿ç”¨ `mconv` æ ‡ç­¾æ¥æ˜ å°„ä¸åŒåç§°çš„å­—æ®µã€‚
- **ä¸åŒºåˆ†å¤§å°å†™**: è‡ªåŠ¨åŒ¹é…æº `map` ä¸­çš„é”®å’Œç»“æ„ä½“å­—æ®µï¼Œä¸é™åˆ¶å¤§å°å†™ã€‚
- **åµŒå¥—ç»“æ„ä½“**: é€’å½’åœ°è½¬æ¢åµŒå¥—çš„ `map` æˆ– `struct`ã€‚
- **é€šè¿‡é’©å­æ‰©å±•**: æä¾›è‡ªå®šä¹‰çš„ `HookFunc` å‡½æ•°æ¥å¤„ç†ç‰¹æ®Šçš„è½¬æ¢é€»è¾‘ã€‚
- **é«˜æ€§èƒ½**: ç¼“å­˜ç»“æ„ä½“çš„åˆ†æç»“æœï¼Œä½¿å¾—åç»­çš„è½¬æ¢éå¸¸å¿«ã€‚

**åŸºç¡€ç”¨æ³•**

```go
package main

import (
	"fmt"
	"github.com/graingo/mconv/complex"
)

func main() {
	type User struct {
		ID   int    `mconv:"user_id"`
		Name string `mconv:"user_name"`
	}

	source := map[string]interface{}{
		"user_id":   123,
		"USER_NAME": "Alice", // ä¸åŒºåˆ†å¤§å°å†™åŒ¹é…
	}

	var user User
	err := complex.StructE(source, &user)
	if err != nil {
		panic(err)
	}

	fmt.Printf("%+v\n", user)
	// Output: {ID:123 Name:Alice}
}
```

**ä½¿ç”¨é’©å­ (Hooks)**

æ‚¨å¯ä»¥ä½¿ç”¨é’©å­æ³¨å…¥è‡ªå®šä¹‰çš„è½¬æ¢é€»è¾‘ã€‚ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªæ•´å‹çš„çŠ¶æ€è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

```go
package main

import (
	"fmt"
	"github.com/graingo/mconv/complex"
	"reflect"
)

func main() {
	type Post struct {
		Title  string
		Status string `mconv:"status"`
	}

	// è¿™ä¸ªé’©å­å°†æ•´å‹ status è½¬æ¢ä¸ºå­—ç¬¦ä¸²è¡¨ç¤º
	intStatusToStringHook := func(from reflect.Type, to reflect.Type, data interface{}) (interface{}, error) {
		if from.Kind() == reflect.Int && to.Kind() == reflect.String {
			i, _ := data.(int)
			switch i {
			case 0:
				return "Draft", nil
			case 1:
				return "Published", nil
			default:
				return "Unknown", nil
			}
		}
		return data, nil
	}

	source := map[string]interface{}{
		"Title":  "Hello World",
		"status": 1,
	}

	var post Post
	err := complex.StructE(source, &post, intStatusToStringHook)
	if err != nil {
		panic(err)
	}

	fmt.Printf("%+v\n", post)
	// Output: {Title:Hello World Status:Published}
}
```

é»˜è®¤æƒ…å†µä¸‹, `mconv` åŒ…å«ä¸€ä¸ªå†…ç½®é’©å­ï¼Œç”¨äºå¤„ç†ä» `string` åˆ° `time.Time` çš„è½¬æ¢ã€‚
